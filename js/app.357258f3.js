(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],d=0,f=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},a={app:0},r=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/pick-or-write-list/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},2251:function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("form",{attrs:{action:"#",method:"get"}},[i("PickOrWriteList",{staticClass:"list",attrs:{"field-data":t.fieldData,"select-from-data":t.fakeData,"field-name":"related_tags"}}),i("button",[t._v("Сохранить")])],1)])},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.fieldData?i("div",{staticClass:"pick-or-write-list"},[i("div",{staticClass:"pick-or-write-list__rows"},t._l(t.fieldData,(function(e){return i("div",{key:e.id,staticClass:"pick-or-write-list__row-item row"},[i("InputRow",{staticClass:"row__component",attrs:{"field-data":e,selectFromData:t.selectFromData},on:{saveRow:t.updateRow}}),i("button",{staticClass:"row__remove",on:{click:function(i){return t.removeRow(e.id)}}},[t._v("×")])],1)})),0),i("button",{staticClass:"pick-or-write-list__create-new-row",on:{click:t.createRow}},[t._v("+")]),i("hr"),i("div",[i("h4",[t._v("Данные для вывода")]),t._v(" "+t._s(t.fieldData)+" ")]),i("hr"),i("div",[i("h4",[t._v("Входящие возможные связи")]),t._v(" "+t._s(t.selectFromData)+" ")]),i("input",{attrs:{type:"hidden",name:t.fieldName},domProps:{value:JSON.stringify(t.fieldData)}})]):t._e()},s=[],l=(i("4de4"),i("d81d"),i("b0c0"),i("9911"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-row"},[-1==t.relation?i("input",{directives:[{name:"model",rawName:"v-model",value:t.link,expression:"link"}],staticClass:"input-row__field",attrs:{type:"text",name:"link",placeholder:"URL",autocomplete:"off"},domProps:{value:t.link},on:{input:[function(e){e.target.composing||(t.link=e.target.value)},t.checkOnInput]}}):i("div",{staticClass:"input-row__relation relation-box"},[i("a",{staticClass:"relation-box__value",attrs:{href:t.link,target:"_blank"}},[t._v(t._s(t.link))]),i("span",{staticClass:"relation-box__remove-button",on:{click:t.unsetLink}},[t._v("×")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"input-row__field",attrs:{type:"text",name:"name",placeholder:"Название",autocomplete:"off"},domProps:{value:t.name},on:{input:[function(e){e.target.composing||(t.name=e.target.value)},t.checkOnInput]}}),0!=t.filteredVariants.length?i("div",{staticClass:"input-row__data-list"},t._l(t.filteredVariants,(function(e){return i("div",{key:e.id,staticClass:"data-list-item",on:{click:function(i){return t.setFromSelectable(e)}}},[i("span",{staticClass:"data-list-item__value"},[t._v(t._s(e.name))]),i("span",{staticClass:"data-list-item__type"},[t._v(t._s(e.type))])])})),0):t._e()])}),c=[],u=(i("caad"),i("2532"),{props:{selectFromData:Array,fieldData:Object},data:function(){return{showHints:-1==this.relation,name:this.fieldData.name,link:this.fieldData.link,type:this.fieldData.type,relation:this.fieldData.relation}},created:function(){this.checkOnInput()},computed:{filteredVariants:function(){var t=this;return this.showHints?0==this.name.length&&0==this.link.length?[]:this.selectFromData.filter((function(e){var i=e.name.toLowerCase()+e.link.toLowerCase();return i.includes(t.link.toLowerCase())||i.includes(t.link.toLowerCase())})):[]},outputFieldData:function(){return{id:this.fieldData.id,name:this.name,link:this.link,type:this.type,relation:this.relation}}},methods:{setFromSelectable:function(t){this.name=t.name,this.link=t.link,this.relation=t.id,this.type=t.type,this.checkOnInput()},unsetLink:function(){this.link="",this.relation=-1,this.type="custom",this.showHints=!0},checkOnInput:function(){0!=this.filteredVariants.length?this.showHints=this.relation!=this.filteredVariants[0].id:this.showHints=!1},saveRow:function(){this.$emit("saveRow",this.outputFieldData)}},watch:{outputFieldData:function(){0!=this.link&&0!=this.name||(this.showHints=!0),this.saveRow()}}}),d=u,f=(i("d665"),i("2877")),p=Object(f["a"])(d,l,c,!1,null,"3be60bd9",null),h=p.exports,m={name:"PickOrWriteList",props:{fieldData:[Array,Boolean],fieldName:String,selectFromData:[Array,Boolean]},methods:{createRow:function(){var t={id:this.fieldData.length+1,name:"",type:"custom-field",relation:-1,link:""};this.fieldData.push(t)},removeRow:function(t){this.fieldData=this.fieldData.filter((function(e){return e.id!=t}))},updateRow:function(t){this.fieldData.map((function(e){if(e.id!=t.id)return!1;e.name=t.name,e.link=t.link,e.relation=t.relation,e.type=t.type}))}},components:{InputRow:h}},v=m,_=(i("b0ff"),Object(f["a"])(v,o,s,!1,null,"1a41305b",null)),k=_.exports,w={name:"App",data:function(){return{fieldData:[{id:0,name:"",type:"custom",relation:-1,link:""},{id:1,name:"Тест",type:"product",relation:0,link:"/url-test-2/"}],fakeData:[{id:0,name:"Проверка",type:"post",link:"/url-test-1/"},{id:1,name:"Тест",type:"post",link:"/url-test-2/"}]}},components:{PickOrWriteList:k}},y=w,b=(i("cf25"),Object(f["a"])(y,a,r,!1,null,null,null)),D=b.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},7101:function(t,e,i){},b0ff:function(t,e,i){"use strict";var n=i("7101"),a=i.n(n);a.a},cf25:function(t,e,i){"use strict";var n=i("fea6"),a=i.n(n);a.a},d665:function(t,e,i){"use strict";var n=i("2251"),a=i.n(n);a.a},fea6:function(t,e,i){}});
//# sourceMappingURL=app.357258f3.js.map